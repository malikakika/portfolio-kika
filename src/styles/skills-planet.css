.sp-section{
  background: var(--bg);
  color: var(--text);
  padding: clamp(20px, 6vw, 96px) clamp(14px, 6vw, 28px);
  position: relative;
  overflow: hidden;
}
.sp-container{ max-width: 1100px; margin: 0 auto; }

.sp-head{ margin-bottom: 12px; }
.sp-title{
  font-size: clamp(20px, 4.8vw, 34px);
  font-weight: 800; line-height: 1.1; position: relative; display: inline-block;
}
.sp-underline{
  position: absolute; left: 0; right: 0; bottom: -6px; height: 3px;
  background: linear-gradient(90deg, var(--accent), #ff6aa9);
  border-radius: 999px; transform-origin: left;
  animation: sp-scan 2.8s ease-in-out infinite;
}
@keyframes sp-scan { 0%{transform:scaleX(.2);opacity:.4} 50%{transform:scaleX(1);opacity:1} 100%{transform:scaleX(.2);opacity:.4} }
.sp-sub{ color: var(--subtext); margin-top: 8px; }


.sp-viewport{
  --sp-scale: 1;                
  position: relative;
  width: 100%;
  height: clamp(360px, 60vw, 560px);
  margin-top: 12px;
  overflow: hidden;
  perspective: 1000px;
  transform: scale(var(--sp-scale));
  transform-origin: center;
}

.sp-tag{
  position: absolute;
  left: 50%; top: 50%;
  transform-style: flat;
  white-space: nowrap;
  font-weight: 800;
  font-size: clamp(11px, 2.6vw, 14px);  
  letter-spacing: .2px;
  padding: clamp(5px, 1.2vw, 7px) clamp(8px, 2vw, 12px); 
  border-radius: 999px;
  user-select: none;
  backface-visibility: hidden;
  will-change: transform, opacity, filter;

  color: var(--text);
  border: 1px solid var(--border);
  background: rgba(16,16,24,.35);
  box-shadow: 0 6px 20px rgba(0,0,0,.25);
  max-width: 46vw;             
  text-overflow: ellipsis;
  overflow: hidden;
}

.sp-hard{ border-color: rgba(255,45,135,.45); background: linear-gradient(135deg, rgba(255,45,135,.20), rgba(255,106,169,.10)); }
.sp-soft{ border-color: rgba(120,120,220,.35); background: linear-gradient(135deg, rgba(120,120,220,.18), rgba(80,80,160,.10)); }
.sp-sport{ border-color: rgba(80,200,160,.35); background: linear-gradient(135deg, rgba(80,200,160,.18), rgba(40,160,120,.10)); }
.sp-trait{ border-color: rgba(255,180,80,.35); background: linear-gradient(135deg, rgba(255,180,80,.18), rgba(180,120,40,.10)); }

.sp-stars{
  position: absolute; inset: 0;
  background-image:
    radial-gradient(2px 2px at 20% 30%, rgba(255,255,255,.35), transparent 40%),
    radial-gradient(1.5px 1.5px at 70% 60%, rgba(255,255,255,.25), transparent 40%),
    radial-gradient(1.2px 1.2px at 40% 80%, rgba(255,255,255,.22), transparent 40%),
    radial-gradient(1.8px 1.8px at 85% 20%, rgba(255,255,255,.28), transparent 40%);
  filter: blur(.2px);
  opacity: .55;
  pointer-events: none;
}

.sp-legend{
  display: flex; flex-wrap: wrap; gap: 8px 10px;
  margin-top: 10px; color: var(--subtext); font-size: 13px;
}
.sp-legend .dot{
  width: 10px; height: 10px; border-radius: 50%; display: inline-block; margin-right: 6px;
  box-shadow: 0 0 12px rgba(255,45,135,.22);
}
.sp-legend .hard{ background: rgba(255,45,135,.85); }
.sp-legend .soft{ background: rgba(120,120,220,.85); box-shadow: 0 0 12px rgba(120,120,220,.25); }
.sp-legend .sport{ background: rgba(80,200,160,.85); box-shadow: 0 0 12px rgba(80,200,160,.25); }
.sp-legend .trait{ background: rgba(255,180,80,.9); box-shadow: 0 0 12px rgba(255,180,80,.25); }

html[data-theme="light"] .sp-tag{ background: rgba(255,255,255,.75); color: #141414; }
html[data-theme="light"] .sp-viewport{ background: linear-gradient(180deg, rgba(20,7,13,.04), rgba(20,7,13,.06)); }


@media (max-width: 820px){
  .sp-viewport{ height: clamp(360px, 72vw, 520px); --sp-scale: 0.95; }
  .sp-legend{ font-size: 12.5px; }
}

@media (max-width: 560px){
  .sp-viewport{ height: clamp(340px, 90vw, 500px); --sp-scale: 0.92; }
  .sp-tag{
    max-width: 60vw;             
  }
  .sp-legend{ gap: 6px 8px; }
}

@media (max-width: 400px){
  .sp-viewport{ height: max(320px, 95vw); --sp-scale: 0.88; }
  .sp-tag{
    font-size: clamp(10.5px, 3.2vw, 12px);
    padding: 5px 8px;
    max-width: 68vw;
  }
  .sp-legend{ font-size: 12px; }
}

@media (prefers-reduced-motion: reduce){
  .sp-viewport { animation: none !important; }
}
